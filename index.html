<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Musical Boxing Machine</title>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <style>        /* General styles */        body {            font-family: 'Arial', sans-serif;            margin: 0;            padding: 0;            background-color: #000;            color: #fff;            display: flex;            justify-content: center;            align-items: center;            height: 100vh;            flex-direction: column;            overflow: hidden;        }
        .container {            background: #222;            border-radius: 15px;            padding: 30px;            width: 85%;            max-width: 1200px;            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);            text-align: center;        }
        h1 {            font-size: 2.5em;            color: #FFD700;            margin-bottom: 20px;            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6);        }
        button {            background-color: #28a745;            color: white;            font-size: 18px;            padding: 12px 25px;            border: none;            border-radius: 8px;            cursor: pointer;            transition: background-color 0.3s ease;            margin: 15px;            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);        }
        button:hover {            background-color: #218838;            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);        }
        .piezo-section {            background-color: #333;            padding: 20px;            border-radius: 10px;            margin-top: 20px;            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);        }
        .piezo-section h3 {            color: #66CCFF;            font-size: 1.8em;        }
        .force-display {            font-size: 30px;            font-weight: bold;            color: #66FF66;            margin-top: 10px;        }
        canvas {            margin-top: 20px;            width: 100%;            max-width: 600px;            border-radius: 10px;            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);        }
        table {            margin-top: 20px;            width: 100%;            border-collapse: collapse;            color: #ccc;        }
        th, td {            padding: 12px;            text-align: center;            border: 1px solid #444;        }
        th {            background-color: #444;        }
        td {            background-color: #222;        }
        .footer {            margin-top: 30px;            font-size: 0.9em;            color: #bbb;        }
    </style></head><body>
<div class="container">    <h1>Musical Boxing Machine - Force Sensor</h1>        <!-- Buttons to Connect and Mute -->    <button onclick="connectBluetooth()">Connect Bluetooth</button>    <button onclick="muteSound()">Mute Sound</button>        <!-- Piezometer 1 Section -->    <div id="piezometer1" class="piezo-section">        <h3>Piezometer 1</h3>        <h4>Live Force: <span id="forceDisplay1" class="force-display">0</span> kg</h4>        <canvas id="forceChart1"></canvas>        <h4>Past Readings</h4>        <table>            <thead>                <tr>                    <th>Time</th>                    <th>Force (kg)</th>                </tr>            </thead>            <tbody id="historyTable1"></tbody>        </table>    </div>
    <!-- Piezometer 2 Section -->    <div id="piezometer2" class="piezo-section">        <h3>Piezometer 2</h3>        <h4>Live Force: <span id="forceDisplay2" class="force-display">0</span> kg</h4>        <canvas id="forceChart2"></canvas>        <h4>Past Readings</h4>        <table>            <thead>                <tr>                    <th>Time</th>                    <th>Force (kg)</th>                </tr>            </thead>            <tbody id="historyTable2"></tbody>        </table>    </div>
    <!-- Piezometer 3 Section -->    <div id="piezometer3" class="piezo-section">        <h3>Piezometer 3</h3>        <h4>Live Force: <span id="forceDisplay3" class="force-display">0</span> kg</h4>        <canvas id="forceChart3"></canvas>        <h4>Past Readings</h4>        <table>            <thead>                <tr>                    <th>Time</th>                    <th>Force (kg)</th>                </tr>            </thead>            <tbody id="historyTable3"></tbody>        </table>    </div>
    <!-- Piezometer 4 Section -->    <div id="piezometer4" class="piezo-section">        <h3>Piezometer 4</h3>        <h4>Live Force: <span id="forceDisplay4" class="force-display">0</span> kg</h4>        <canvas id="forceChart4"></canvas>        <h4>Past Readings</h4>        <table>            <thead>                <tr>                    <th>Time</th>                    <th>Force (kg)</th>                </tr>            </thead>            <tbody id="historyTable4"></tbody>        </table>    </div>
    <!-- Footer -->    <div class="footer">        <p>&copy; 2025 Musical Boxing Machine - Force Sensor System</p>    </div></div>
<script>let charts = [], forceData = [], muteState = false;
// Bluetooth Connectionasync function connectBluetooth() {    try {        const device = await navigator.bluetooth.requestDevice({            acceptAllDevices: true,            optionalServices: ['battery_service']        });
        const server = await device.gatt.connect();        const service = await server.getPrimaryService('battery_service');        const characteristic = await service.getCharacteristic('battery_level');
        characteristic.addEventListener('characteristicvaluechanged', handleData);        await characteristic.startNotifications();    } catch (error) {        alert("Bluetooth Error: " + error);    }}
// Handling incoming data and updating valuesfunction handleData(event) {    let adcValue = event.target.value.getUint8(0);
    let voltage = (adcValue / 4095) * 3.3;    let forceKg = (voltage - 0.1) / 0.02; // Adjust this formula for your sensor scaling
    for (let i = 1; i <= 4; i++) {        document.getElementById(`forceDisplay${i}`).innerText = forceKg.toFixed(2);        let now = new Date().toLocaleTimeString();        document.getElementById(`historyTable${i}`).innerHTML += `<tr><td>${now}</td><td>${forceKg.toFixed(2)} kg</td></tr>`;
        forceData[i - 1].push({ x: now, y: forceKg });        if (forceData[i - 1].length > 10) forceData[i - 1].shift();        charts[i - 1].update();    }}
// Mute sound controlfunction muteSound() {    muteState = !muteState;    fetch(`http://your-esp32-ip/mute?state=${muteState ? '1' : '0'}`)        .then(response => response.text())        .then(data => alert(muteState ? "Sound Muted!" : "Sound Unmuted!"));}
// Initialize chartsdocument.addEventListener("DOMContentLoaded", function() {    for (let i = 1; i <= 4; i++) {        let ctx = document.getElementById(`forceChart${i}`).getContext("2d");        charts[i - 1] = new Chart(ctx, {            type: "line",            data: {                datasets: [{                    label: `Force (kg) Piezometer ${i}`,                    data: forceData[i - 1] || [],                    borderColor: "#66CCFF",                    backgroundColor: "rgba(102,204,255,0.2)"                }]            },            options: {                scales: {                    x: { type: "linear" },                    y: { beginAtZero: true }                }            }        });        forceData[i - 1] = [];    }});</script>
</body></html>
